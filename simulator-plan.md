## 📄 동적 API 시뮬레이터 웹 애플리케이션 기획서 (v1.3)

기획서에 **패키지 구조** 항목을 추가하여 최종본을 완성했습니다. 아래는 모든 내용이 포함된 기획서입니다.

-----

# **동적 API 시뮬레이터 웹 애플리케이션 기획서 (v1.3)**

## **1. 프로젝트 개요**

### **1.1. 프로젝트명**

  - 동적 API 시뮬레이터 (Dynamic API Simulator)

### **1.2. 핵심 아이디어**

  - 사용자가 **웹 UI를 통해 동적으로 파라미터와 값을 설정**하면, 해당 데이터를 **고유한 API 엔드포인트로 즉시 생성**해주는 웹 애플리케이션.
  - 개발자나 테스터는 이 API를 통해 **백엔드 개발 없이도 원하는 JSON 형식의 응답을 받아 프론트엔드 개발 및 테스트에 활용**할 수 있습니다.

\<br\>

***예시)***
*사용자가 `depth_data`, `water_quality`, `tool`이라는 파라미터를 정의하고 값을 설정하면, 생성된 API에 요청 시 아래와 같은 JSON을 반환합니다.*

```json
{
  "depth_data": 25,
  "water_quality": 30,
  "tool": "test"
}
```

-----

## **2. 주요 기능 요구사항 (Functional Requirements)**

### **2.1. 사용자 및 인증**

  - **회원가입:**
      - 입력 항목: 사용자 이름, 사용자 ID, 비밀번호, 비밀번호 확인
  - **로그인:**
      - 입력 항목: 사용자 ID, 비밀번호

### **2.2. 시뮬레이터 관리**

  - **시뮬레이터 생성 및 저장:**
      - 사용자는 시뮬레이터 이름과 함께, 반환하고자 하는 데이터의 **파라미터와 값을 Key-Value 형태로 정의**하여 저장합니다.
  - **시뮬레이터 API 데이터 반환:**
      - 각 시뮬레이터는 **`{사용자ID}-{시뮬레이터이름}`** 형식의 고유한 경로를 가집니다.
      - 해당 경로로 API 요청 (GET)이 들어오면, 사전에 정의된 파라미터 값을 **JSON 형식으로 반환**합니다.

### **2.3. 대시보드**

  - **시뮬레이터 현황 관리:**
      - 사용자가 생성한 모든 시뮬레이터 목록을 대시보드에서 확인하고 관리할 수 있습니다.
  - **시뮬레이터 활성화/비활성화 (On/Off):**
      - 대시보드에서 토글 스위치를 통해 각 시뮬레이터의 활성화 상태를 제어합니다.
      - **`Off` (비활성화) 상태**의 시뮬레이터 API에 데이터 요청 시, 아래와 같은 메시지를 반환합니다.
        ` json     {       "message": "해당 시뮬레이터는 비활성화 상태 입니다."     }      `

### **2.4. 이산 사건 시뮬레이션 (Spec-Out / Future Scope)**

  - **목표:** 정적인 값 반환을 넘어, 특정 조건이나 확률에 따라 **정의된 스펙을 벗어나는 동적인 값을 반환**하는 기능을 추가합니다.
  - **구현:** **SimPy** 라이브러리를 활용하여 시뮬레이터 파라미터에 이산 사건(Discrete-Event) 로직을 적용합니다.

-----

## **3. 기술 스택 (Technology Stack)**

  - **Backend:** **Python**, **FastAPI**
  - **Frontend:** **React**
  - **Database:** **PostgreSQL**
  - **Simulation Engine:** **SimPy** (이산 사건 기능 구현 시 활용)

-----

## **4. 데이터베이스 스키마 (Database Schema)**

### **`users` Table**

  - 사용자의 기본 정보를 저장하는 테이블

| Column | Type | Constraints | Description |
| :--- | :--- | :--- |:---|
| `id` | SERIAL | PRIMARY KEY | 사용자 고유 식별자 (자동 증가) |
| `name` | VARCHAR(255) | NOT NULL | 사용자 이름 |
| `user_id`| VARCHAR(255) | NOT NULL, UNIQUE | 사용자 로그인 ID |
| `password`| TEXT | NOT NULL | 해시 처리된 비밀번호 |

\<br\>

### **`simulators` Table**

  - 사용자가 생성한 시뮬레이터 정보를 저장하는 테이블

| Column | Type | Constraints | Description |
| :--- | :--- | :--- |:---|
| `id` | SERIAL | PRIMARY KEY | 시뮬레이터 고유 식별자 (자동 증가) |
| `user_id` | INTEGER | FOREIGN KEY (users.id) | 시뮬레이터 소유자 (users 테이블 참조) |
| `name` | VARCHAR(255) | NOT NULL | 시뮬레이터 이름 |
| `parameters`| JSONB 또는 TEXT | NOT NULL | 시뮬레이터 파라미터 (JSON 형식) |
| `is_active`| BOOLEAN | NOT NULL, DEFAULT true | 활성화 여부 (기본값: true) |

-----

## **5. 패키지 구조**

프로젝트의 최상위 패키지 구조는 `simulator` 아래에 `backend`와 `frontend`로 나눕니다.

### **`simulator` (프로젝트 루트)**

  * 전체 프로젝트의 최상위 루트 디렉토리입니다.

### **`backend`**

  * **Python/FastAPI 코드**: API 엔드포인트, 데이터베이스 연동 로직, 시뮬레이션 엔진(SimPy) 통합 코드 등이 포함됩니다.
  * **환경 설정 파일**: `.env`, `requirements.txt`, `Dockerfile` 등이 위치합니다.
  * **데이터베이스 마이그레이션 스크립트**: Alembic과 같은 도구를 사용하여 스키마 변경 이력을 관리하는 파일들입니다.

### **`frontend`**

  * **React 코드**: 사용자 인터페이스 컴포넌트, 상태 관리 로직, API 호출 로직 등이 포함됩니다.
  * **빌드 설정 파일**: `package.json`, `webpack.config.js`, `.env` 등이 위치합니다.
  * **정적 자원**: 이미지, CSS 파일, 폰트 등 프론트엔드에서 직접 사용하는 파일들입니다.

-----

## **6. UI/UX 원칙**

  - **직관적이고 심미적인 디자인:** 사용자가 최소한의 학습으로 서비스를 이용할 수 있도록 **사용자 친화적인 인터페이스**를 구축하며, 동시에 **심미적으로 우수한 디자인**을 적용합니다.
  - **React 생태계 최적화:** UI 컴포넌트 라이브러리는 **React와의 호환성 및 개발 생산성이 높은 도구**를 채택합니다. (예: **MUI**, **Ant Design**)

-----

## **7. 배포 전략 (Deployment Strategy)**

  - **컨테이너 기반 배포:**
      - **Docker Compose**를 사용하여 데이터베이스 서비스를 컨테이너화하여 일관된 환경에서 손쉽게 배포 및 관리합니다.
  - **환경 변수 관리:**
      - 데이터베이스 접속 정보(`DB_USER`, `DB_PASSWORD`, `DB_PORT`) 등 민감하거나 환경에 따라 변경되어야 하는 설정은 **환경 변수**를 통해 주입합니다.
      - DB 스키마 및 계정 정보는 **사전에 정의된 명세**를 정확히 따릅니다.
  - **최신 라이브러리 유지:**
      - 백엔드 `requirements.txt` 파일에는 라이브러리 버전을 고정하지 않고, **항상 최신 안정화 버전을 사용**하여 최신 기능과 보안 패치를 적용합니다.
  - **최신 개발 기법 적용:**
      - **`Context7`(가칭)과 같은 코드 분석 및 최신화 도구**를 개발 프로세스에 통합하여 **Deprecated된 문법이나 비효율적인 코드를 배제**하고, 항상 최신의 안정적인 코딩 기법을 적용합니다.

-----

## **8. 개발 방법론 (Development Methodology)**

  - **최신 기술 검증 (Modern Tech Adoption):**
      - 개발에 사용될 라이브러리 및 코딩 문법이 최신 표준에 부합하고 안정적인지 사전에 검증하여 기술 부채를 최소화합니다.
  - **점진적 개발 및 피드백 (Step-by-Step with Feedback Control):**
      - 사용자 인증, 시뮬레이터 생성 등 **핵심 기능 단위로 점진적으로 개발**을 진행합니다.
      - 각 기능 개발 완료 후 내부/외부 피드백을 신속하게 반영하고 수정하는 **애자일(Agile) 방식**을 채택하여 개발 완성도를 높입니다.